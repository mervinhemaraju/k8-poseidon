provider:
  name: cloudflare

env:
  - name: CF_API_TOKEN
    valueFrom:
      secretKeyRef:
        name: cf-creds
        key: dnsapitoken

logLevel: info
policy: sync
registry: txt
txtOwnerId: external-dns-plagueworks-org

sources:
  - service  
  - ingress
  - traefik-proxy
extraArgs:
  - --cloudflare-proxied
  - --traefik-disable-legacy
  - --ignore-ingress-rules-spec
  - --ignore-ingress-tls-spec
  # Add this for better CRD support
  - --crd-source-apiversion=traefik.io/v1alpha1
  - --crd-source-kind=IngressRoute
  - --annotation-filter=external-dns.alpha.kubernetes.io/cloudflare-comment

domainFilters:
  - plagueworks.org

triggerLoopOnEvent: true
interval: 1m

serviceMonitor:
  enabled: false